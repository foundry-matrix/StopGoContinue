<html>
<head>
	<title>Stop, go, continue</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>
	<script type="text/javascript">

	$(document).ready(function(){
		var svg_data;
		// function fetch(){
		// 	setInterval(function(){
		// 		$.getJSON('http://localhost:3000', function(data){
					
		// 			svg_data = data;
					
		// 		});
		// 	}, 3000);
		// }

		// fetch();

		// dummy data
		svg_data = [{text: "Wedensday drinks! #continue", rt:"4"},{text: "Removing the door #go", rt:"15"},{text: "Thursday drinks! #continue", rt:"9"},{text: "Keeping the door open #cotinue", rt:"5"}, {text: "Friday drinks! #continue", rt:"13"},{text: "Keeping the door open #stop", rt:"11"},{text: "Morning challenges #go", rt:"2"} ]
		
		length = svg_data.length;

		var barPadding = 20;
		var h = 200;
		var w = 500;

		var barPadding = 20;

		var svg = d3.select("body")
					.append("svg")
					.attr({
						width: w,
						height: h,
					});

		var svg2 = d3.select("body")
					.append("svg")
					.attr({
						width: w,
						height: h,
						y: 210
					});



		var texts = svg2.selectAll("text")
				.data(svg_data)
				.enter()
				.append("text")
				.attr("x", function(d,i){ return 25;})
				.attr("y", function(d,i){ return i * ( h/length)  + 20})
				.text(function(d){ return (d.text + " " + d.rt)});

	
		var rects = svg.selectAll("rect")
			   .data(svg_data)
			   .enter()
			   .append("rect")
			   .attr("fill", function (d) { return "rgb(0, 0, " + (d.rt * 20) + ")" ;});



 


		rects.attr("x", function(d, i) {
			   		return i * ( w/length );
			   })
			   .attr("y", function(d) {
			   		return h - (d.rt * 5);
			   })
			   .attr("width", function(d){ return w/length})
			   .attr("height", function(d) {
			   		return d.rt * 5;
			   });

/*

	var circles = svg.selectAll("circle")
			.data(svg_data)
			.enter()
			.append("circle");

		circles.attr("cx", function(d, i) {
						return 30;
					})
				   .attr("cy", function(d,i){ return i * 50 + 20})
				   .attr("r", function(d) {
				   		console.log(d.rt);
						return d.rt;
				   })
				   .attr("fill", "black")
				   .attr("stroke-width", function(d) {
						return d/2;
				   });
*/



	});



	</script>
</body>
</html>